<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scan - NetScanner</title>
    <link rel="stylesheet" href="scan.css">
</head>
<body>

    <!-- Header -->
    <header>
        <h1 class="logo"><span class="green-text">NetScanner>_</span></h1> 
        <div class="nav-container">
            <nav>
                <a href="NetScanner.html">Home</a>
                <a href="Scan.html">Scan</a>
                <a href="#">AI Assistant</a>
                <a href="#">User Guide</a>
                <a href="About.html">About</a>
            </nav>
            <!-- Login button that redirects to the login page -->
            <a href="login.html"><button class="login-button">Login</button></a>
        </div>
    </header>
        
    <!-- Scan Section -->
    <div class="scan-container">
        <h1 class="scan-title"><span class="green-text">Quick Scan</span><span class="green-text"> Your Network</span></h1>
        <div class="scan-box">
            <label for="ip">Enter IP Address:</label>

            <input type="text" id="ip" placeholder="192.168.1.1">
        </div>
        <button class="start-scan" onclick="startQuickScan()">Start Quick Scan</button>
        
        <div class="results-box">
            <div class="results-header">
            </div>
            <div class="results-content">Results will appear here... 
                <br><br>
                <pre id="result"></pre>
                </p>
            </div>
        </div>
    </div>
    <script>
        function startQuickScan() {
            const ip = document.getElementById("ip").value.trim();
            const resultDiv = document.getElementById("result");

            if (!ip) {
                alert("Please enter a valid IP address.");
                return;
            }

            fetch("http://127.0.0.1:5000/quickscan", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ ip })
            })
            .then(response => response.json())
            .then(data => {
                resultDiv.textContent = data.output || data.error;
            })
            .catch(error => {
                console.error("Error:", error);
                resultDiv.textContent = "An error occurred during scanning.";
            });
        }
        document.addEventListener("DOMContentLoaded", function () {
            const isLoggedIn = localStorage.getItem("loggedIn"); // Check login status
    
            document.querySelectorAll("nav a").forEach(link => {
                if (link.getAttribute("href") === "Scan.html") {
                    link.addEventListener("click", function (event) {
                        if (!isLoggedIn) {
                            event.preventDefault(); // Prevent navigation
                            alert("You must be logged in to access this page.");
                            window.location.href = "login.html"; // Redirect to login page
                        }
                    });
                }
            });
        });
    </script>
</body>
</html> 